<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç”µè„‘ä¿å«æˆ˜</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: white; /* çº¯ç™½èƒŒæ™¯ */
      color: #333;
      margin: 0;
      padding: 20px;
      padding-bottom: 50px; /* å¢åŠ åº•éƒ¨å†…è¾¹è·ï¼Œé¿å…å†…å®¹è¢«é®æŒ¡ */
    }

    h1 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 2.5rem;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
    }

    #controls {
      text-align: center;
      margin-bottom: 20px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background: #4f46e5; /* æŒ‰é’®èƒŒæ™¯é¢œè‰² */
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s, box-shadow 0.2s;
      margin: 0 10px; /* å¢åŠ æŒ‰é’®ä¹‹é—´çš„é—´è· */
    }

    button:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 8px rgba(0, 0, 0, 0.5);
    }

    #timer {
      font-weight: bold;
      margin-top: 10px;
      font-size: 1.2rem;
    }

    #progress-bar {
      width: 100%;
      height: 10px;
      background-color: #4f46e5; /* åˆå§‹èƒŒæ™¯é¢œè‰²ä¸ºç´«è‰² */
      margin-top: 5px;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    #progress {
      height: 100%;
      background: white; /* è¿›åº¦æ¡çš„èƒŒæ™¯ä¸ºç™½è‰² */
      width: 100%; /* åˆå§‹å®½åº¦ä¸º 100% */
      transform-origin: right; /* è®¾ç½®å˜æ¢çš„èµ·ç‚¹ä¸ºå³ä¾§ */
      transform: scaleX(0); /* åˆå§‹ç¼©æ”¾ä¸º 0 */
      transition: transform 1s linear; /* å®½åº¦å˜åŒ–çš„åŠ¨ç”»æ•ˆæœ */
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr); /* æ¯è¡Œ 6 ä¸ªç¡¬ç›˜ */
      gap: 15px;
      max-width: 800px;
      margin: 0 auto;
    }

    .drive {
      background: linear-gradient(135deg, #f9f9f9, #e6e6e6);
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 5px; /* å‡å°‘å†…è¾¹è· */
      text-align: center;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 80px; /* ç¼©å°é«˜åº¦ */
      width: 100px; /* å›ºå®šå®½åº¦ */
    }

    .drive:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      background: linear-gradient(135deg, #e6f7ff, #d9f0ff);
    }

    .drive-icon {
      font-size: 1.5rem; /* ç¼©å°å›¾æ ‡ */
      color: #0078d7;
      margin-bottom: 3px; /* å‡å°‘é—´è· */
    }

    .drive-label {
      font-size: 0.9rem; /* ç¼©å°å­—ä½“ */
      font-weight: bold;
      color: #333;
    }

    .file {
      font-size: 12px; /* ç¼©å°å­—ä½“ */
      margin-top: 3px; /* å‡å°‘é—´è· */
      padding: 2px; /* å‡å°‘å†…è¾¹è· */
      border-radius: 4px;
      height: 16px; /* ç¼©å°é«˜åº¦ */
      visibility: hidden;
      background: #f0f0f0;
      color: #333;
      text-align: center;
      line-height: 16px; /* è°ƒæ•´è¡Œé«˜ */
    }

    .file.visible {
      visibility: visible;
    }

    .real {
      background-color: #d4fcdc;
      color: green;
      font-weight: bold;
    }

    .fake {
      background-color: #d4fcdc;
      color: green;
      font-weight: bold;
    }

    .invaded {
      background-color: #ffe5e5 !important;
      color: #c00 !important;
      font-weight: bold;
    }

    #result {
      text-align: center;
      margin-top: 10px; /* å‡å°‘é¡¶éƒ¨å¤–è¾¹è·ï¼Œæ•´ä½“å‘ä¸Šç§»åŠ¨ */
      font-size: 1.5rem;
      font-weight: bold;
      animation: fadeIn 1s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    #rules {
      text-align: center;
      margin-top: 20px;
      font-size: 1.2rem;
    }

    .difficulty-box {
      width: 120px;
      height: 60px;
      background: linear-gradient(135deg, #0078d7, #005a9e);
      color: white;
      font-size: 16px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    .difficulty-box:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 8px rgba(0, 0, 0, 0.5);
    }

    .difficulty-box.easy {
      background: linear-gradient(135deg, #4caf50, #388e3c);
    }

    .difficulty-box.medium {
      background: linear-gradient(135deg, #ff9800, #f57c00);
    }

    .difficulty-box.hard {
      background: linear-gradient(135deg, #f44336, #d32f2f);
    }

    .difficulty-box.hell {
      background: linear-gradient(135deg, #9c27b0, #7b1fa2);
    }
  </style>
</head>
<body>

  <h1>ğŸ’» å®ˆæŠ¤ä½ çš„ç”µè„‘</h1>
  <div id="controls">
    <button onclick="showRules()">æ¸¸æˆè§„åˆ™</button>
    <button onclick="selectDifficulty()">é€‰æ‹©éš¾åº¦</button>
    <div id="timer">å€’è®¡æ—¶ï¼š??ç§’</div>
    <div id="progress-bar"><div id="progress"></div></div>
  </div>

  <div id="difficulty-selection" style="display: none; text-align: center; margin-bottom: 20px;">
    <h2>é€‰æ‹©éš¾åº¦</h2>
    <div style="display: flex; justify-content: center; gap: 20px;">
      <div class="difficulty-box easy" onclick="setDifficulty('easy')">ç®€å•</div>
      <div class="difficulty-box medium" onclick="setDifficulty('medium')">ä¸­ç­‰</div>
      <div class="difficulty-box hard" onclick="setDifficulty('hard')">å›°éš¾</div>
      <div class="difficulty-box hell" onclick="setDifficulty('hell')">åœ°ç‹±</div>
    </div>
  </div>

  <div id="grid"></div>

  <div id="result"></div>

  <script>
    const grid = document.getElementById("grid");
    const timerEl = document.getElementById("timer");
    const resultEl = document.getElementById("result");
    const progress = document.getElementById("progress");

    let realMole = null;
    let fakeMoles = [];
    let countdown = 20;
    let interval = null;
    let gameOver = false;
    let difficulty = "easy"; // é»˜è®¤éš¾åº¦
    let roundCount = 0; // è½®æ¬¡è®¡æ•°

    function showRules() {
      alert("æ¸¸æˆè§„åˆ™ï¼š\n1. åœ°é¼ å³å°†æ¥è¢­ï¼å·¦é”®ç‚¹å‡»ç¡¬ç›˜ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰åœ°é¼ æ­£åœ¨å°è¯•æ”»å‡»è¯¥åŒºåŸŸã€‚\n2. å°å¿ƒè™šå‡åœ°é¼ ï¼åœ°é¼ ä¼šæ•£æ’­ä¾¦å¯Ÿå…µï¼Œè½¬ç§»ä½ çš„æ³¨æ„åŠ›ã€‚\n3. æŠŠåœ°é¼ èµ¶å‡ºå»ï¼æ‰¾å‡ºåœ°é¼ çœŸæ­£æƒ³ä¾µå çš„ç¡¬ç›˜ï¼Œå³é”®é©±é€å®ƒä»¬ç¦»å¼€ç”µè„‘ã€‚\n\néš¾åº¦è¯´æ˜ï¼š\nç®€å•ï¼š3-5ä¸ªåœ°é¼ ï¼Œ20ç§’æ”»ä¸‹ç”µè„‘\nä¸­ç­‰ï¼š6-9ä¸ªåœ°é¼ ï¼Œ15ç§’æ”»ä¸‹ç”µè„‘\nå›°éš¾ï¼š10ä¸ªåœ°é¼ ï¼Œ10ç§’æ”»ä¸‹ç”µè„‘\nåœ°ç‹±ï¼šåœ°é¼ ä¼šæ‰“æ¸¸å‡»æˆ˜äº†ï¼15ä¸ªåœ°é¼ ï¼Œ8ç§’æ”»ä¸‹ç”µè„‘");
    }
    
    function selectDifficulty() {
      document.getElementById("difficulty-selection").style.display = "block";
      document.getElementById("controls").style.display = "none";
    }

    function setDifficulty(selectedDifficulty) {
      difficulty = selectedDifficulty;
      document.getElementById("difficulty-selection").style.display = "none";
      document.getElementById("controls").style.display = "block";
      startGame();
    }

    function generateDrives() {
      grid.innerHTML = "";
      for (let i = 0; i < 24; i++) {
        const driveLetter = String.fromCharCode(67 + i); // C-Z
        const drive = document.createElement("div");
        drive.className = "drive";
        drive.dataset.letter = driveLetter;
        drive.innerHTML = `
          <div class="drive-icon">ğŸ’¾</div>
          <div class="drive-label">${driveLetter}:</div>
          <div class="file">ï¼ˆç©ºï¼‰</div>
        `;
        drive.oncontextmenu = (e) => {
          e.preventDefault();
          handleClick(drive, true); // å³é”®æ‰“åœ°é¼ 
        };
        drive.onclick = () => handleClick(drive, false); // å·¦é”®æŸ¥çœ‹æ–‡ä»¶
        grid.appendChild(drive);
      }
    }

    function startGame() {
      gameOver = false;
      resultEl.textContent = "";
      clearInterval(interval);

      // æ ¹æ®éš¾åº¦è®¾ç½®å‚æ•°
      let totalTime; // å®šä¹‰æ€»æ—¶é—´å˜é‡
      if (difficulty === "easy") {
        countdown = 20;
        totalTime = 20; // ç®€å•æ¨¡å¼æ€»æ—¶é—´
        fakeCount = Math.floor(Math.random() * 3) + 3; // 3-5ä¸ªå‡åœ°é¼ 
      } else if (difficulty === "medium") {
        countdown = 15;
        totalTime = 15; // ä¸­ç­‰æ¨¡å¼æ€»æ—¶é—´
        fakeCount = Math.floor(Math.random() * 4) + 6; // 6-9ä¸ªå‡åœ°é¼ 
      } else if (difficulty === "hard") {
        countdown = 10;
        totalTime = 10; // å›°éš¾æ¨¡å¼æ€»æ—¶é—´
        fakeCount = 10; // 10ä¸ªå‡åœ°é¼ 
      } else if (difficulty === "hell") {
        countdown = 8;
        totalTime = 8; // åœ°ç‹±æ¨¡å¼æ€»æ—¶é—´
        fakeCount = 15; // 15ä¸ªå‡åœ°é¼ 
      }

      timerEl.textContent = `å€’è®¡æ—¶ï¼š${countdown}ç§’`;
      progress.style.transform = "scaleX(0)"; // åˆå§‹åŒ–è¿›åº¦æ¡ä¸º 0
      generateDrives();

      const drives = document.querySelectorAll(".drive");
      realMole = drives[Math.floor(Math.random() * drives.length)];
      const realFile = realMole.querySelector(".file");
      realFile.textContent = "ğŸŸ¢ mole.exe"; // çœŸåœ°é¼ æ–‡ä»¶å
      realFile.classList.add("real");
      realMole.dataset.type = "real";

      fakeMoles = [];
      const fakeNames = [
        "mo1e.exe",
        "m0le.exe",
        "mol3.exe",
        "mole.eee",
        "m01e.exe",
        "Mole.exe",
        "mOle.exe",
        "male.exe",
        "mele.exe"
      ]; // å‡åœ°é¼ æ–‡ä»¶ååˆ—è¡¨

      while (fakeMoles.length < fakeCount) {
        const candidate = drives[Math.floor(Math.random() * drives.length)];
        if (candidate !== realMole && !fakeMoles.includes(candidate)) {
          const file = candidate.querySelector(".file");
          file.textContent = "ğŸŸ¢ " + fakeNames[Math.floor(Math.random() * fakeNames.length)];
          file.classList.add("fake");
          candidate.dataset.type = "fake";
          fakeMoles.push(candidate);
        }
      }

      interval = setInterval(() => {
        countdown--;
        timerEl.textContent = `å€’è®¡æ—¶ï¼š${countdown}ç§’`;
        progress.style.transform = `scaleX(${(totalTime - countdown) / totalTime})`; // æ ¹æ®æ—¶é—´è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹
        if (countdown <= 0) {
          endGame(false);
        }
      }, 1000);
    }

    function handleClick(drive, isRightClick) {
      if (gameOver) return;

      const file = drive.querySelector(".file");
      if (!isRightClick) {
        file.classList.add("visible"); // å·¦é”®æ˜¾ç¤ºæ–‡ä»¶
      } else {
        const type = drive.dataset.type;
        if (type === "real") {
          clearInterval(interval);
          gameOver = true;
          roundCount++; // æˆåŠŸåå¢åŠ è½®æ¬¡è®¡æ•°
          resultEl.textContent = `ğŸ¯ æˆåŠŸé©±é€äº†åœ°é¼ ï¼è¿›å…¥ç¬¬ ${roundCount + 1} è½®è¿›æ”»ï¼`;
          setTimeout(startGame, 2000); // 2ç§’åå¼€å§‹ä¸‹ä¸€è½®
        } else if (type === "fake") {
          endGame(false);
        }
      }
    }

    function endGame(success) {
      clearInterval(interval);
      gameOver = true;

      if (!success) {
        document.querySelectorAll(".drive").forEach(d => {
          const file = d.querySelector(".file");
          file.textContent = "ğŸ’£ mole.exe";
          file.classList.add("visible"); // æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶
          file.classList.remove("real", "fake");
          file.classList.add("invaded");
        });
        resultEl.textContent = `âš ï¸ åœ°é¼ ä¾µå äº†ä½ çš„ç”µè„‘ï¼ä½ åšæŒäº† ${roundCount} è½®è¿›æ”»ï¼`;
      }
    }

    // åˆå§‹åŠ è½½
    generateDrives();
  </script>
</body>
</html>